# Contributing
First off, thank you for considering contributing to Changie.

> If you or your team is interested in adapting Changie but
> not sure how it works into your processes please post a [discussion] for ideas or tips.

If you are interested in contributing but are stuck getting started post a [discussion] for assistance.

In order to simplify documentation and to prevent out of sync documentation commands will not be listed here,
instead view the [taskfile] for the appropriate commands.
Even if you do not install and use Task this file will have the commands you need.

## Find a bug?
Did you run Changie and see a go panic error?
Maybe your `CHANGELOG.md` file is empty after running merge.

Head on over to the [issues page](https://github.com/miniscruff/changie/issues) and let us know what you did.

## Need an additional feature?
Post a [discussion] to present your idea and use cases.
If the new feature falls in line with the goals of the project it may be approved and implemented.

## Making changes
Before making changes please create an issue to discuss if it is a good fit.
Besides just adding features or fixing bugs, documentation changes are also very helpful.
Some ideas are example configurations or a guide on how to use Changie with other tools.

If you do decide to contribute code or documentation you will need the following:
* [Go](https://golang.org/doc/install): check [go.mod](go.mod) for which version is used.
    * Newer versions should also work
* [Hugo](https://gohugo.io/): for documentation, be sure to install hugo-extended
* [Golang CI](https://golangci-lint.run/): for linting
* [Go Task](https://taskfile.dev): (optional) used to organize commands
    * Run `task list` to see available commands, some tasks require other tools
    * You can view the [taskfile] for commands if you do not have it installed
    * Another option is to view the github workflows for how CI is used
* [Cobra CLI](https://github.com/spf13/cobra): (optional) has code gen tools for CLI commands
* [Ginkgo](https://onsi.github.io/ginkgo/): (optional) external CLI test runner with code gen tools

### Fork and create a branch
If there is an issue you want to propose changes for start by [creating a fork](https://help.github.com/articles/fork-a-repo).
On your new forked repository create a branch.
Pick any branch name you like that describes your change, but really anything works.

Now you are ready to start working on your change.

### Get the tests running
Check the [taskfile] for commands to run tests.

Running tests should be possible immediately after cloning with just `go`.

### Viewing the documentation
Check the [taskfile] for commands to view and generate documentation.

Documentation is generated by Hugo and sourced from different locations.
* CLI help is located in the code on Cobra commands.
* Changelog is copied from the root CHANGELOG.md file
* Help, config and examples are pulled from static markdown files in the `website` directory.

If you are making changes to cobra command documentation you will have to generate markdown documentation before running Hugo.
When making changes to static markdown files hugo can reload pages when using the "serve" command.

### Creating a change file
Changie uses itself to generate the [CHANGELOG](CHANGELOG.md).
If you are making a change that would effect end users you will need to create a change file.
Change files are generated by Changie using the "new" command.

If you are not sure your work needs a change file you can ask.

As there may be backwards incompatible changes in development it is recommended you run Changie locally instead of a separate installed version.
To do this use `go run` on the main file:

`go run main.go new`

Gitlab created a guide for [good changelog entires](https://docs.gitlab.com/ee/development/changelog.html#writing-good-changelog-entries)
that can be referenced when writing your body message.

Be sure to commit the generated file to your branch as part of your pull request.

### Prepare your pull request
Check the [taskfile] for commands to check tests and formatting.

Before being approved changes must:
* Keep 100% code coverage
* Be properly formatted
* Have no linting errors
* Documentation changes are included
* Include a change file if expected

If you have completed all of these, continue on to making your pull request.

## Creating your pull request
When you are ready to get your work merged into the main repository you can
[open a pull request](https://docs.github.com/en/github/collaborating-with-issues-and-pull-requests/about-pull-requests).

Some tips to streamline this process:
* Keep the change small.
* Start your pull request as a draft for feedback.
* Run all checks before opening your pull request.
* Add comments to your pull request if you have questions about implementation details.
* Link your pull request to the issue it resolves [using GitHub keywords](https://docs.github.com/en/github/managing-your-work-on-github/linking-a-pull-request-to-an-issue#linking-a-pull-request-to-an-issue-using-a-keyword).

A maintainer should review your pull request in a timely manner.

If your work is approved it will be squash and merged so feel free to use as many commits as you want.

[discussion]: https://github.com/miniscruff/changie/discussions
[taskfile]: Taskfile.yml
